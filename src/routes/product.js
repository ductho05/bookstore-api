const express = require("express")
const router = express.Router()
const productController = require("../controllers/ProductControllers")
const upload = require("../config/cloudinary")
const authorization = require("../middleware/Authorization")
const authentication = require("../middleware/Authentication")

router.get("/", productController.getAllProduct)
router.get("/count_product", productController.getCountProduct)
router.get("/id/:id", productController.getProductById)
router.get("/title/:title", productController.getProductByName)
router.get("/author/:author", productController.getProductByAuthor)
router.get("/published_date/:start/:end", productController.getProductByYear)
router.post("/category", productController.getProductByCategory)
router.get("/new/:num", productController.getNewProduct)
router.get("/sale/:num", productController.getLowestProduct)
router.get("/bestseller/:num", productController.getBestSellerProduct)
router.get("/price/:start/:end/:sort", productController.getProductByPrice)
router.get("/textbooks", productController.getProductByCategoryName)
router.post("/add", authorization, upload.single('images'), productController.addProduct)
router.put("/update/:id", authentication, upload.single('images'), productController.updateProduct)
router.put("/update-sold", authentication, productController.updateSoldProduct)
router.get("/delete/:id", authorization, productController.deleteProduct)
router.get("/bestseller-limit", productController.getProductBestSellerLimit)
router.get("/maxcategory", productController.getNumProductByCategory)
router.get("/rate", productController.getNumProductByRate)
router.put("/many", authorization, productController.updateManyProduct)

module.exports = router
